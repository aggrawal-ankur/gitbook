# Doug Lea's Memory Model

_**11, 15, 17 September 2025**_

***

<table><thead><tr><th width="137">Terminology</th><th>Meaning</th></tr></thead><tbody><tr><td>Allocator Instance</td><td>Every process gets an instance of the allocator program, <code>dlmalloc</code> in this case.<br>It is the manager of dynamic memory for that process. It ensures that the process's ask for dynamic memory gets fulfilled.</td></tr><tr><td>Arena</td><td>The entire pool of memory managed by the <code>dlmalloc</code> instance for a process is called arena.<br>It is not fixed. The kernel releases it as required.</td></tr><tr><td>Chunk</td><td>A chunk is the fundamental unit of memory in <code>dlmalloc</code>.<br>Chunks are of two types: in-use chunks and free chunks.<br>The last chunk near the end of the heap (near the program break) is called the <strong>top chunk</strong>.</td></tr><tr><td>Mmap'd Chunk</td><td>Requests above a certain threshold of size are handled by anonymous mapping in mmap region. Such allocations are called mmap chunks.</td></tr><tr><td>Bins</td><td>Bin is a strategy to manage free chunks.<br>Implemented using linked lists.</td></tr><tr><td>Trees</td><td>Tree is strategy to manage large free chunks.</td></tr><tr><td>Splitting</td><td>When a big chunk is available but a small chunk is requested, the allocator carves the requested size out of the big chunk and leave the rest in bins. This is called <strong>splitting</strong>.</td></tr><tr><td>Coalescing</td><td>When the process frees an allocation, it makes the chunk available for reuse to the allocator. When such chunks are present adjacent to each other, they can be merged into one large free chunk. This is called <strong>coalescing</strong>.</td></tr><tr><td>Consolidation</td><td></td></tr><tr><td>Fragmentation</td><td>Wastage of memory.</td></tr><tr><td>External Fragmentation</td><td>Free memory exists but in pieces too small or scattered to satisfy a request.<br>Example: you have three 1 KB holes but need 3 KB contiguous.</td></tr><tr><td>Internal Fragmentation</td><td>Memory inside an allocated chunk that the program doesnâ€™t use. <br>Example: the process asked for 13 bytes, allocator rounded up to 16. 3 bytes wasted in padding.</td></tr><tr><td>Trimming</td><td>Releasing memory from the top chunk back to the kernel.<br>It prevents unbounded growth.</td></tr><tr><td>Fit Strategy</td><td>Refers to how the allocator decides which is the best chunk for a malloc request.</td></tr></tbody></table>
